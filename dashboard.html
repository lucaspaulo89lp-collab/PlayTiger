<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Dashboard ‚Äî PlayTiger</title>
  <link rel="stylesheet" href="assets/css/main.css" />
</head>
<body>
  <header class="topbar">
    <div class="container topbar__inner">
      <a class="brand" href="./">
        <span class="brand__mark">üêØ</span>
        <span class="brand__text">PlayTiger</span>
      </a>

      <nav class="nav">
        <a class="nav__link" href="./">Home</a>
        <a class="nav__link" href="login.html">Conta</a>
        <a class="nav__link" href="games/clicker/index.html">Tiger Clicker</a>
      </nav>

      <div class="wallet">
        <span class="wallet__label" id="hello">Ol√°</span>
        <span class="wallet__value" id="walletTGC">0</span>
        <span class="wallet__unit">TGC</span>
      </div>
    </div>
  </header>

  <main class="container">
    <section class="section">
      <div class="section__head">
        <h1 class="section__title">Dashboard</h1>
        <p class="section__desc">Seus dados ficam salvos neste navegador (local). Sem backend por enquanto.</p>
      </div>

      <div class="grid">
        <article class="card">
          <div class="card__badge">Perfil</div>
          <h3 class="card__title" id="playerName">Visitante</h3>
          <p class="card__text">Troque seu nome em ‚ÄúConta‚Äù.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;">
            <a class="btn btn--ghost" href="login.html">Gerenciar conta</a>
            <button class="btn btn--ghost" id="btnLogout">Sair</button>
          </div>
          <p class="hint" id="logoutMsg"></p>
        </article>

        <article class="card">
          <div class="card__badge">Carteira</div>
          <h3 class="card__title"><span id="balance">0</span> <span style="color:var(--accent);font-weight:1000;">TGC</span></h3>
          <p class="card__text">Moeda fict√≠cia interna. Sem valor fora do site.</p>
          <div style="display:flex;gap:10px;flex-wrap:wrap;">
            <a class="btn btn--primary" href="games/clicker/index.html">Ganhar TGC no Clicker</a>
            <button class="btn btn--ghost" id="btnDaily">B√¥nus di√°rio</button>
          </div>
          <p class="hint" id="dailyMsg"></p>
        </article>

        <article class="card">
          <div class="card__badge">Estat√≠sticas</div>
          <h3 class="card__title">Seu desempenho</h3>
          <p class="card__text">Resumo das suas partidas.</p>

          <div style="display:grid;grid-template-columns:repeat(2,minmax(0,1fr));gap:10px;margin-top:10px;">
            <div style="border:1px solid var(--stroke);border-radius:14px;padding:10px 12px;background:rgba(0,0,0,.12);">
              <div class="muted" style="font-size:12px;">Jogos jogados</div>
              <div style="font-size:20px;font-weight:1000;" id="gamesPlayed">0</div>
            </div>
            <div style="border:1px solid var(--stroke);border-radius:14px;padding:10px 12px;background:rgba(0,0,0,.12);">
              <div class="muted" style="font-size:12px;">Streak di√°rio</div>
              <div style="font-size:20px;font-weight:1000;" id="streak">0</div>
            </div>
            <div style="border:1px solid var(--stroke);border-radius:14px;padding:10px 12px;background:rgba(0,0,0,.12);">
              <div class="muted" style="font-size:12px;">Best TPS (Clicker)</div>
              <div style="font-size:20px;font-weight:1000;" id="bestTPS">0.0</div>
            </div>
            <div style="border:1px solid var(--stroke);border-radius:14px;padding:10px 12px;background:rgba(0,0,0,.12);">
              <div class="muted" style="font-size:12px;">√öltimo score (cliques)</div>
              <div style="font-size:20px;font-weight:1000;" id="lastScore">0</div>
            </div>
          </div>
        </article>
      </div>
    </section>

    <section class="section">
      <div class="section__head">
        <h2 class="section__title">Atalhos</h2>
        <p class="section__desc">Acesso r√°pido aos jogos.</p>
      </div>

      <div class="grid">
        <article class="card">
          <div class="card__badge">Recomendado</div>
          <h3 class="card__title">Tiger Clicker</h3>
          <p class="card__text">Jogo completo com TGC + upgrades.</p>
          <a class="btn btn--primary" href="games/clicker/index.html">Abrir</a>
        </article>

        <article class="card">
          <div class="card__badge">Pr√≥ximo</div>
          <h3 class="card__title">Tiger Memory</h3>
          <p class="card__text">Vamos finalizar o jogo na pr√≥xima etapa.</p>
          <a class="btn btn--ghost" href="games/memory/index.html">Abrir</a>
        </article>

        <article class="card">
          <div class="card__badge">Pr√≥ximo</div>
          <h3 class="card__title">Tiger 2048</h3>
          <p class="card__text">Implementa√ß√£o completa na sequ√™ncia.</p>
          <a class="btn btn--ghost" href="games/2048/index.html">Abrir</a>
        </article>
      </div>
    </section>
  </main>

  <script src="assets/js/core.js"></script>
  <script>
    const u = PlayTiger.user.get();
    const s = PlayTiger.stats.get();

    const setWalletUI = () => {
      document.getElementById("walletTGC").textContent = PlayTiger.wallet.getTGC();
      document.getElementById("balance").textContent = PlayTiger.wallet.getTGC();
    };

    document.getElementById("hello").textContent = "Ol√°, " + u.name;
    document.getElementById("playerName").textContent = u.name + (u.isLogged ? "" : " (Visitante)");

    setWalletUI();

    document.getElementById("gamesPlayed").textContent = s.gamesPlayed || 0;
    document.getElementById("streak").textContent = s.streak || 0;
    document.getElementById("bestTPS").textContent = (s.clicker?.bestTPS || 0).toFixed(1);
    document.getElementById("lastScore").textContent = s.clicker?.lastScore || 0;

    document.getElementById("btnDaily").addEventListener("click", () => {
      const r = PlayTiger.stats.claimDailyBonus();
      setWalletUI();
      document.getElementById("dailyMsg").textContent = r.message;
    });

    document.getElementById("btnLogout").addEventListener("click", () => {
      PlayTiger.user.logout();
      document.getElementById("logoutMsg").textContent = "Saiu da conta. Voc√™ agora √© Visitante.";
      setTimeout(() => location.href = "login.html", 500);
    });
  </script>
</body>
</html>
